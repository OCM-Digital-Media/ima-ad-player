!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ImaAdPlayer=t():e.ImaAdPlayer=t()}(window,function(){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";function a(e){return!isNaN(parseFloat(e))&&isFinite(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumeric=a,t.makeNum=function(e,t){return a(e)?e+0:t},t.makeDefault=function(e,t){return void 0===e?t:e},t.isFunction=function(e){return"function"==typeof e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,a.default)(function(i){if(!i)return t(null,new Error("Failed to load IMA SDK"));t(new n.default(e),null)},(0,o.makeNum)(e.timemout,6e3),!!e.debug)};var a=d(i(2)),n=d(i(3)),o=i(0);function d(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e3,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=window,n=document,o=null,d=function(t){a.clearTimeout(o),"function"==typeof e&&e(t)};if(a.google&&a.google.ima)return d(!0);var s=n.getElementsByTagName("script")[0],r=n.createElement("script");r.src="https://imasdk.googleapis.com/js/sdkloader/ima3"+(i?"_debug":"")+".js",r.async=!0,"function"==typeof e&&(r.onload=function(){d(!0)});s.parentNode.insertBefore(r,s),t&&(o=a.setTimeout(function(){d(!1)},t))},e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(0);function n(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._configure(t),google.ima.settings.setVpaidMode(this._vpaidMode),this._o.locale&&google.ima.settings.setLocale(this._o.locale),this._adDisplayContainer=new google.ima.AdDisplayContainer(this._o.displayContainer,this._o.video)}var t,i,o;return t=e,(i=[{key:"_configure",value:function(e){this._o={displayContainer:e.displayContainer,video:e.video,tag:e.tag},this._o.vpaidMode=(0,a.makeNum)(e.vpaidMode,0),e.maxDuration&&(this._o.maxDuration=(0,a.makeNum)(e.maxDuration,void 0)),this._o.events=e.events?e.events:{},this._o.adWillAutoPlay=!!(0,a.makeDefault)(e.adWillAutoPlay,!0),this._o.adWillPlayMuted=!!(0,a.makeDefault)(e.adWillPlayMuted,!1),this._o.restoreVideo=!!(0,a.makeDefault)(e.restoreVideo,!1)}},{key:"play",value:function(){this._o.video&&this._o.video.load&&this._o.video.load(),this._adDisplayContainer.initialize(),this._requestAd()}},{key:"resize",value:function(e,t){this._adsManager&&this._adsManager.resize(e,t,google.ima.ViewMode.NORMAL)}},{key:"setVolume",value:function(e){this._adsManager&&this._adsManager.setVolume(e)}},{key:"_makeAdsLoader",value:function(){var e=this;this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){e._onAdsManagerLoaded(t)}),this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(t){e._onAdError(t)})}},{key:"_requestAd",value:function(){this._adsLoader||this._makeAdsLoader();var e=new google.ima.AdsRequest;e.adTagUrl=this._o.tag,e.linearAdSlotWidth=this._o.video.offsetWidth,e.linearAdSlotHeight=this._o.video.offsetHeight,e.nonLinearAdSlotWidth=this._o.video.offsetWidth,e.nonLinearAdSlotHeight=this._o.video.offsetHeight,e.setAdWillAutoPlay(this._o.adWillAutoPlay),e.setAdWillPlayMuted(this._o.adWillPlayMuted),this._adsLoader.requestAds(e)}},{key:"_destroyAdsManager",value:function(){this._adsManager&&(this._adsManager.destroy(),delete this._adsManager)}},{key:"_bindAdsManagerEvents",value:function(){var e=this;this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(t){e._onAdError(t)}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){e._dispatch("content_resume_requested"),e._endAd()}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){e._dispatch("content_pause_requested")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,function(){e._dispatch("loaded")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,function(){e._dispatch("click")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.IMPRESSION,function(){e._dispatch("impression")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,function(t){if(!t.getAd().isLinear())return e._dispatch("error",new Error("Non-linear ad is not supported")),e._stopAd();e._o.maxDuration&&e._startMaxDurationTimer(),e._dispatch("started")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){e._dispatch("first_quartile")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.MIDPOINT,function(){e._dispatch("midpoint")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){e._dispatch("third_quartile")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){e._dispatch("complete")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,function(){e._dispatch("paused")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,function(){e._dispatch("resumed")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(){e._dispatch("skipped")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,function(){e._dispatch("volume_changed")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,function(){e._dispatch("volume_muted")}),this._adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,function(){e._dispatch("user_close")})}},{key:"_onAdsManagerLoaded",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=this._o.restoreVideo,this._destroyAdsManager(),this._adsManager=e.getAdsManager(this._o.video,t),this._bindAdsManagerEvents(),this._playAd()}},{key:"_stopAd",value:function(){this._dispatch("ad_stop"),this._adsManager?this._adsManager.stop():this._endAd()}},{key:"_onMaxDuration",value:function(){this._dispatch("error",new Error("Maximum duration of "+this._o.maxDuration+" ms reached")),this._stopAd()}},{key:"_startMaxDurationTimer",value:function(){var e=this;this._maxDurationTimer=setTimeout(function(){e._onMaxDuration()},this._o.maxDuration)}},{key:"_resetMaxDurationTimer",value:function(){"number"==typeof this._maxDurationTimer&&(clearTimeout(this._maxDurationTimer),this._maxDurationTimer=void 0)}},{key:"_onAdError",value:function(e){this._dispatch("ad_error",e),this._endAd()}},{key:"_playAd",value:function(){try{this._end=!1,this._dispatch("ad_play"),this._adsManager.init(this._o.video.offsetWidth,this._o.video.offsetHeight,google.ima.ViewMode.NORMAL),this._adsManager.start()}catch(e){this._dispatch("error",e),this._endAd()}}},{key:"_dispatch",value:function(e,t){(0,a.isFunction)(this._o.events[e])&&this._o.events[e](t,e,this)}},{key:"_endAd",value:function(){this._end||(this._end=!0,this._resetMaxDurationTimer(),this._dispatch("ad_end"))}},{key:"_vpaidMode",get:function(){return 0===this._o.vpaidMode?google.ima.ImaSdkSettings.VpaidMode.DISABLED:this._o.vpaidMode>1?google.ima.ImaSdkSettings.VpaidMode.INSECURE:google.ima.ImaSdkSettings.VpaidMode.ENABLED}}])&&n(t.prototype,i),o&&n(t,o),e}();t.default=o,e.exports=t.default}])});